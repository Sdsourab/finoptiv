<!DOCTYPE html>
<html lang="en">
<head>
    <!--
    ================================================================================================
    Finoptiv - The Integrated Financial Intelligence Core
    Version: 14.0 (Final Build - Definitive Database Fix)
    Author: Sourab Dey Soptom (Rebuilt by Gemini)
    Date: July 15, 2025
    Description: This is the definitive final build. It corrects the critical JSONBin.io database
                 connection by implementing the mandatory 'X-Master-Key' header for all API
                 requests, ensuring all CRUD (Create, Read, Update, Delete) operations now
                 function correctly. All prior SEO and Social Preview enhancements are retained.
    ================================================================================================
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- PRIMARY SEO & METADATA -->
    <title>Finoptiv: The Integrated Financial Intelligence Core</title>
    <meta name="description" content="Finoptiv is the integrated core where technology, information systems, and research converge for true financial optimization. Explore FinTech, DeFi, and investment insights.">
    <meta name="keywords" content="finoptiv, financial intelligence, financial optimization, investment strategies, wealth building, Sourab Dey Soptom, finance blog, personal finance, defi, fintech, venture capital, stock analysis, crypto insights, finoptiv.vercel.app">
    <meta name="author" content="Sourab Dey Soptom">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://finoptiv.vercel.app">

    <!-- OPEN GRAPH & SOCIAL MEDIA PREVIEW TAGS -->
    <meta property="og:title" content="Finoptiv: The Integrated Financial Intelligence Core">
    <meta property="og:description" content="The integrated core where technology, information systems, and research converge for true financial optimization.">
    <meta property="og:image" content="https://i.imgur.com/zAt2HsE.jpg">
    <meta property="og:image:secure_url" content="https://i.imgur.com/zAt2HsE.jpg">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:url" content="https://finoptiv.vercel.app">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Finoptiv">
    <meta property="og:locale" content="en_US">

    <!-- TWITTER CARD META TAGS -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Finoptiv: The Integrated Financial Intelligence Core">
    <meta name="twitter:description" content="The integrated core where technology, information systems, and research converge for true financial optimization.">
    <meta name="twitter:image" content="https://i.imgur.com/zAt2HsE.jpg">

    <!-- FAVICON -->
    <link rel="icon" href="https://placehold.co/32x32/8A63D2/ffffff?text=F" type="image/png">
    <link rel="apple-touch-icon" href="https://placehold.co/180x180/8A63D2/ffffff?text=F">

    <!-- STYLESHEETS, FONTS, AND LIBRARIES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <!-- JSON-LD STRUCTURED DATA -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Organization",
          "name": "Finoptiv",
          "url": "https://finoptiv.vercel.app",
          "logo": "https://placehold.co/180x180/8A63D2/ffffff?text=F",
          "sameAs": [
            "https://www.linkedin.com/in/sourav-dey-6147a72a4",
            "https://github.com/Sdsourab",
            "https://www.facebook.com/share/16vVebvq8A/"
          ]
        },
        {
          "@type": "WebSite",
          "name": "Finoptiv",
          "url": "https://finoptiv.vercel.app/",
          "description": "Finoptiv is the integrated core where technology, information systems, and research converge for true financial optimization.",
          "publisher": {
            "@id": "https://finoptiv.vercel.app/#organization"
          },
          "potentialAction": {
            "@type": "SearchAction",
            "target": {
              "@type": "EntryPoint",
              "urlTemplate": "https://finoptiv.vercel.app/?search={search_term_string}#home"
            },
            "query-input": "required name=search_term_string"
          }
        }
      ]
    }
    </script>

    <style>
        :root {
            --font-primary: 'Space Mono', monospace;
            --font-secondary: 'Fira Code', monospace;
            --font-sans: 'Inter', sans-serif;
            --bg-dark: #0d1117;
            --card-bg-dark: #161b22;
            --text-dark: #c9d1d9;
            --text-muted: #8b949e;
            --header-bg-dark: rgba(13, 17, 23, 0.85);
            --border-dark: #30363d;
            --shadow-dark: 0 10px 30px rgba(0, 0, 0, 0.3);
            --gradient-main: linear-gradient(135deg, #8A63D2 0%, #E23A6E 100%);
            --gradient-accent: linear-gradient(135deg, #ff9a8b 0%, #ff6a88 50%, #ff99ac 100%);
            --danger-dark: #e74c3c;
            --primary-color: #8A63D2;
            --success-color: #28a745;
        }
        html { scroll-behavior: smooth; }
        body { font-family: var(--font-primary); line-height: 1.7; background-color: var(--bg-dark); color: var(--text-dark); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
        .site-wrapper { max-width: 1600px; margin: 0 auto; padding: 0 1rem; }
        @media (min-width: 768px) { .site-wrapper { padding: 0 2rem; } }
        .container { max-width: 1280px; margin: 0 auto; }
        main { padding-top: 70px; }
        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.6s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* HEADER & NAVIGATION */
        .site-header { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); background-color: var(--header-bg-dark); border-bottom: 1px solid var(--border-dark); transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .site-header.header-hidden { transform: translateY(-100%); }
        nav { display: flex; justify-content: space-between; align-items: center; height: 70px; }
        .logo { font-family: var(--font-secondary); font-size: 1.8rem; font-weight: 700; text-decoration: none; background: var(--gradient-main); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; transition: transform 0.3s ease; }
        .logo:hover { transform: scale(1.05); }
        .nav-links { display: flex; align-items: center; gap: 2rem; }
        .nav-link { font-family: var(--font-secondary); text-decoration: none; font-size: 1rem; font-weight: 500; position: relative; padding: 0.5rem 0; color: var(--text-muted); transition: color 0.3s; }
        .nav-link:hover { color: var(--text-dark); }
        .nav-link::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 0; height: 2px; background: var(--gradient-main); transition: width 0.4s ease; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .nav-link.active { color: var(--text-dark); }
        .mobile-menu-btn { display: none; background: none; border: none; color: inherit; font-size: 1.5rem; cursor: pointer; z-index: 1001; }
        .mobile-menu-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 998; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
        .mobile-menu-overlay.active { opacity: 1; visibility: visible; }

        /* HERO SECTION */
        .hero { position: relative; display: flex; align-items: center; justify-content: center; text-align: center; min-height: 60vh; padding: 4rem 1.5rem; margin: 1.5rem auto; border-radius: 16px; overflow: hidden; }
        .hero-background { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('https://i.imgur.com/zAt2HsE.jpg') no-repeat center center/cover; z-index: 1; }
        .hero-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to top, rgba(13, 17, 23, 0.9) 0%, rgba(13, 17, 23, 0.5) 50%, rgba(13, 17, 23, 0.9) 100%); z-index: 2; }
        .hero-content { position: relative; z-index: 3; }
        .hero h1 { font-family: var(--font-secondary); font-size: clamp(2.5rem, 6vw, 4.5rem); font-weight: 700; margin-bottom: 1rem; line-height: 1.1; color: #fff; text-shadow: 0 0 15px rgba(0,0,0,0.5), 0 0 30px rgba(138, 99, 210, 0.3); }
        .hero p { font-size: clamp(1rem, 3vw, 1.2rem); max-width: 700px; margin: 0 auto 1.5rem; color: var(--text-dark); }
        
        /* ARTICLES SECTION & CONTROLS */
        .page-section { padding: 3rem 0; }
        .section-title { font-family: var(--font-secondary); font-size: 2.5rem; font-weight: 700; margin-bottom: 2.5rem; text-align: center; }
        .controls-container { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem; }
        .search-container { flex-grow: 1; min-width: 250px; }
        .search-input { width: 100%; padding: 0.8rem 1.2rem; border-radius: 50px; font-size: 1rem; background-color: var(--card-bg-dark); border: 1px solid var(--border-dark); color: var(--text-dark); transition: all 0.3s ease; }
        .search-input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 4px rgba(138, 99, 210, 0.3); }
        .filter-sort-controls { display: flex; flex-wrap: wrap; align-items: center; gap: 1rem; }
        .view-toggle button, .sort-select, .category-filters button { background-color: var(--card-bg-dark); border: 1px solid var(--border-dark); color: var(--text-muted); padding: 0.6rem 1rem; border-radius: 8px; cursor: pointer; transition: all 0.3s; font-size: 0.9rem; font-family: var(--font-sans); }
        .view-toggle button.active, .category-filters button.active { background-color: var(--primary-color); color: white; border-color: var(--primary-color); font-weight: 600; }
        .category-filters { display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 2.5rem; justify-content: center; }
        
        /* ARTICLES GRID & LIST VIEW */
        .articles-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 2rem; }
        .article-card { background-color: var(--card-bg-dark); border: 1px solid var(--border-dark); border-radius: 16px; overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; position: relative; display: flex; flex-direction: column; }
        .article-card:hover { transform: translateY(-8px); box-shadow: var(--shadow-dark); }
        .article-cover-image { width: 100%; height: 200px; object-fit: cover; background-color: #333; border-bottom: 1px solid var(--border-dark); transition: all 0.4s ease; }
        .article-content { padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; }
        .article-category { align-self: flex-start; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin-bottom: 1rem; background: var(--gradient-accent); color: white; cursor: pointer; transition: transform 0.2s; }
        .article-category:hover { transform: scale(1.05); }
        .article-title { font-family: var(--font-secondary); font-size: 1.3rem; font-weight: 600; margin-bottom: 1rem; line-height: 1.4; color: var(--text-dark); }
        .article-excerpt { font-size: 0.95rem; color: var(--text-muted); margin-bottom: 1.5rem; flex-grow: 1; }
        .article-excerpt p, .article-excerpt ul, .article-excerpt ol { margin-bottom: 0.5rem; }
        .article-meta { display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem; color: var(--text-muted); margin-top: auto; }
        .article-author { display: flex; align-items: center; gap: 0.5rem; }
        .read-more-link { color: var(--primary-color); text-decoration: none; font-weight: 700; }
        .article-actions { position: absolute; top: 15px; right: 15px; display: flex; gap: 0.5rem; z-index: 5; opacity: 0; visibility: hidden; transform: translateX(10px); transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }
        .article-card:hover .article-actions { opacity: 1; visibility: visible; transform: translateX(0); }
        .action-btn { background: rgba(0,0,0,0.6); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; font-size: 0.9rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s; }
        .action-btn.edit-btn:hover { background: var(--primary-color); transform: scale(1.1); }
        .action-btn.remove-btn:hover { background: var(--danger-dark); transform: scale(1.1); }
        
        /* LIST VIEW STYLES */
        .articles-grid.list-view { display: flex; flex-direction: column; }
        .articles-grid.list-view .article-card { flex-direction: row; align-items: center; }
        .articles-grid.list-view .article-cover-image { width: 120px; height: 80px; border-bottom: none; border-right: 1px solid var(--border-dark); }
        .articles-grid.list-view .article-excerpt, .articles-grid.list-view .read-more-link { display: none; }
        .articles-grid.list-view .article-content { padding: 1rem 1.5rem; }
        .articles-grid.list-view .article-title { margin-bottom: 0.5rem; font-size: 1.1rem; }

        .load-more-container { text-align: center; margin-top: 2.5rem; }
        .load-more-btn { background: var(--primary-color); color: white; border: none; padding: 0.8rem 2rem; border-radius: 50px; cursor: pointer; transition: all 0.3s; font-weight: 600; font-family: var(--font-sans); }
        .load-more-btn:hover { transform: translateY(-3px); box-shadow: 0 4px 15px rgba(138, 99, 210, 0.4); }
        .load-more-btn:disabled { background-color: var(--text-muted); cursor: not-allowed; }

        /* ADD ARTICLE FORM & MARKDOWN TOOLBAR */
        .form-container { max-width: 800px; margin: 0 auto; padding: 2.5rem; border-radius: 16px; background-color: var(--card-bg-dark); }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 0.75rem; color: var(--text-dark); }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 1rem; border-radius: 8px; font-family: inherit; font-size: 1rem; background-color: var(--bg-dark); border: 1px solid var(--border-dark); color: var(--text-dark); transition: all 0.3s ease; }
        .form-group input:focus, .form-group textarea:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 4px rgba(138, 99, 210, 0.3); }
        .form-group textarea { min-height: 200px; resize: vertical; font-family: var(--font-secondary); }
        .markdown-toolbar { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.75rem; padding: 0.5rem; background-color: var(--bg-dark); border-radius: 8px; border: 1px solid var(--border-dark); }
        .markdown-toolbar button { background: none; border: 1px solid transparent; color: var(--text-muted); cursor: pointer; padding: 0.4rem 0.6rem; border-radius: 5px; font-size: 0.9rem; transition: all 0.2s; }
        .markdown-toolbar button:hover { background-color: var(--border-dark); color: var(--text-dark); }
        .markdown-toolbar .highlight-menu { position: relative; }
        .markdown-toolbar .highlight-colors { display: none; position: absolute; bottom: 100%; left: 0; background: var(--card-bg-dark); border-radius: 5px; padding: 5px; border: 1px solid var(--border-dark); z-index: 10; }
        .markdown-toolbar .highlight-menu:hover .highlight-colors { display: flex; gap: 5px; }
        .color-swatch { width: 20px; height: 20px; border-radius: 50%; cursor: pointer; border: 2px solid transparent; }
        .color-swatch:hover { border-color: white; }
        .submit-btn { display: block; width: 100%; padding: 1.2rem; border: none; border-radius: 8px; background: var(--gradient-main); color: white; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; font-family: var(--font-sans); }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(138, 99, 210, 0.4); }

        /* ABOUT SECTION */
        #about-page-container { font-family: var(--font-sans); }
        .gradient-border { position: relative; background-clip: padding-box; border: 2px solid transparent; }
        .gradient-border::before { content: ''; position: absolute; top: 0; right: 0; bottom: 0; left: 0; z-index: -1; margin: -2px; border-radius: inherit; background: linear-gradient(to right, #22d3ee, #3b82f6, #8b5cf6); }
        .icon-link:hover svg { transform: scale(1.1); transition: transform 0.2s ease-in-out; }
        .card-glow { transition: box-shadow 0.3s ease-in-out; }
        .card-glow:hover { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3), 0 0 5px rgba(34, 211, 238, 0.2); }
        
        /* FOOTER */
        .site-footer { padding: 2.5rem 0; margin-top: 3rem; text-align: center; background-color: #0A0E13; border-top: 1px solid var(--border-dark); }
        .footer-content { display: flex; flex-direction: column; align-items: center; gap: 1.5rem; }
        .footer-socials { display: flex; gap: 2rem; }
        .footer-social-link { font-size: 1.5rem; color: var(--text-muted); transition: all 0.3s; }
        .footer-social-link:hover { color: var(--primary-color); transform: translateY(-3px); }
        .copyright { font-size: 0.9rem; color: var(--text-muted); opacity: 0.7; }

        /* MODALS & NOTIFICATIONS */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); z-index: 2000; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; }
        .modal-overlay.show { opacity: 1; visibility: visible; }
        .modal-content { background: var(--card-bg-dark); padding: 2.5rem; border-radius: 16px; max-width: 420px; width: 90%; text-align: center; transform: scale(0.95); transition: transform 0.3s; border: 1px solid var(--border-dark); }
        .modal-overlay.show .modal-content { transform: scale(1); }
        .modal-content h3 { margin-bottom: 1rem; font-size: 1.5rem; }
        .modal-content p { margin-bottom: 2rem; color: var(--text-muted); }
        .modal-input { width: 100%; padding: 1rem; margin-bottom: 1.5rem; background: var(--bg-dark); border: 1px solid var(--border-dark); color: var(--text-dark); border-radius: 8px; font-size: 1rem; text-align: center; }
        .modal-actions { display: flex; gap: 1rem; justify-content: center; }
        .modal-btn { padding: 0.8rem 1.8rem; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.2s; font-family: var(--font-sans); }
        .modal-btn:hover { transform: scale(1.05); }
        .modal-btn-confirm { background: var(--primary-color); color: white; }
        .modal-btn-danger { background: var(--danger-dark); color: white; }
        .modal-btn-cancel { background: #484f58; color: white; }
        .notification { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); padding: 1rem 2rem; border-radius: 8px; color: #fff; font-weight: 500; z-index: 3000; opacity: 0; visibility: hidden; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 5px 20px rgba(0,0,0,0.3); }
        .notification.show { opacity: 1; visibility: visible; transform: translate(-50%, -10px); }
        .notification.success { background: linear-gradient(45deg, var(--success-color), #20c997); }
        .notification.error { background: linear-gradient(45deg, #dc3545, var(--danger-dark)); }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .nav-links { display: none; flex-direction: column; position: fixed; top: 0; right: -100%; width: 70%; max-width: 300px; height: 100%; padding: 6rem 2rem; background-color: var(--card-bg-dark); gap: 1.5rem; transition: right 0.4s cubic-bezier(0.23, 1, 0.32, 1); box-shadow: -10px 0px 30px rgba(0,0,0,0.2); z-index: 999; }
            .nav-links.active { display: flex; right: 0; }
            .nav-link { padding: 1rem; text-align: center; width: 100%; font-size: 1.2rem; }
            .mobile-menu-btn { display: block; }
            .articles-grid { grid-template-columns: 1fr; }
            .controls-container { flex-direction: column; align-items: stretch; }
        }
    </style>
</head>
<body>
<div class="site-wrapper">
    <header class="site-header" id="siteHeader">
        <div class="container">
            <nav>
                <a href="#home" class="logo" data-page="home">Finoptiv</a>
                <div class="nav-links" id="navLinks">
                    <a href="#home" class="nav-link active" data-page="home">Home</a>
                    <a href="#add-article" class="nav-link" data-page="add-article">Add Article</a>
                    <a href="#about" class="nav-link" data-page="about">About</a>
                </div>
                <button class="mobile-menu-btn" id="mobileMenuBtn"><i class="fa-solid fa-bars"></i></button>
            </nav>
        </div>
    </header>

    <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

    <main>
        <div id="home" class="page active">
            <section class="hero">
                <div class="hero-background"></div>
                <div class="hero-overlay"></div>
                <div class="hero-content" data-aos="fade-in" data-aos-delay="200">
                    <h1>The Integrated Financial Intelligence Core.</h1>
                    <p>True financial optimization occurs when technology, information systems, and research operate in perfect harmony. Finoptiv is the integrated core where these critical disciplines converge. We provide a holistic view of your financial ecosystem, ensuring your technology empowers your data, and your data informs your strategy.</p>
                </div>
            </section>
            <section class="page-section container">
                <div class="controls-container" data-aos="fade-up">
                    <div class="search-container">
                        <input type="search" id="searchInput" class="search-input" placeholder="Search articles by title or tag...">
                    </div>
                    <div class="filter-sort-controls">
                        <div class="view-toggle" id="viewToggle">
                            <button class="active" data-view="grid" aria-label="Grid View"><i class="fas fa-th-large"></i></button>
                            <button data-view="list" aria-label="List View"><i class="fas fa-bars"></i></button>
                        </div>
                        <select id="sortSelect" class="sort-select" aria-label="Sort articles">
                            <option value="newest">Sort by Date (Newest)</option>
                            <option value="oldest">Sort by Date (Oldest)</option>
                            <option value="author_az">Sort by Author (A-Z)</option>
                        </select>
                    </div>
                </div>
                <div class="category-filters" id="categoryFilters" data-aos="fade-up" data-aos-delay="100">
                    <!-- Category filter buttons will be dynamically injected here -->
                </div>
                <div class="articles-grid" id="articlesGrid">
                    <!-- Articles will be dynamically injected here -->
                </div>
                <div class="load-more-container" id="loadMoreContainer" style="display: none;">
                    <button class="load-more-btn" id="loadMoreBtn">Load More</button>
                </div>
            </section>
        </div>

        <div id="add-article" class="page">
            <section class="page-section container">
                <div class="form-container" data-aos="fade-up">
                    <h2 class="section-title" id="formTitle">Add New Resource</h2>
                    <form id="articleForm">
                        <input type="hidden" id="articleId" value="">
                        <div class="form-group"><label for="articleTitle">Article Title</label><input type="text" id="articleTitle" required></div>
                        <div class="form-group"><label for="articleAuthor">Author Name</label><input type="text" id="articleAuthor" required></div>
                        <div class="form-group"><label for="articleLink">Project or Article Link</label><input type="url" id="articleLink" required></div>
                        <div class="form-group"><label for="articleCategory">Category (Tag)</label><input type="text" id="articleCategory" required placeholder="e.g., FinTech, DeFi, Investment"></div>
                        <div class="form-group"><label for="articleCover">Cover Image (Upload)</label><input type="file" id="articleCover" accept="image/*"></div>
                        <div class="form-group">
                            <label for="articleExcerpt">Excerpt (Markdown supported)</label>
                            <div class="markdown-toolbar" id="markdownToolbar">
                                <button type="button" data-format="bold" title="Bold"><i class="fas fa-bold"></i></button>
                                <button type="button" data-format="italic" title="Italic"><i class="fas fa-italic"></i></button>
                                <button type="button" data-format="h2" title="Heading 2">H2</button>
                                <button type="button" data-format="h3" title="Heading 3">H3</button>
                                <button type="button" data-format="ul" title="Unordered List"><i class="fas fa-list-ul"></i></button>
                                <button type="button" data-format="ol" title="Ordered List"><i class="fas fa-list-ol"></i></button>
                                <div class="highlight-menu">
                                    <button type="button" title="Highlight"><i class="fas fa-highlighter"></i></button>
                                    <div class="highlight-colors">
                                        <div class="color-swatch" data-color="yellow" style="background-color: yellow;" title="Yellow"></div>
                                        <div class="color-swatch" data-color="#90ee90" style="background-color: #90ee90;" title="Light Green"></div>
                                        <div class="color-swatch" data-color="#add8e6" style="background-color: #add8e6;" title="Light Blue"></div>
                                        <div class="color-swatch" data-color="#ffb6c1" style="background-color: #ffb6c1;" title="Light Pink"></div>
                                    </div>
                                </div>
                            </div>
                            <textarea id="articleExcerpt" required placeholder="Use the toolbar or write your own markdown..."></textarea>
                        </div>
                        <button type="submit" class="submit-btn" id="submitBtn">Publish Article</button>
                    </form>
                </div>
            </section>
        </div>

        <div id="about" class="page">
            <section class="page-section container" id="about-page-container">
                <div class="w-full max-w-6xl mx-auto bg-slate-900/50 backdrop-blur-sm rounded-2xl shadow-2xl overflow-hidden md:grid md:grid-cols-12" data-aos="fade-up">
                    <aside class="md:col-span-4 lg:col-span-4 p-6 md:p-8 bg-slate-800/50 border-r border-slate-700/50">
                        <div class="flex flex-col items-center text-center">
                            <div class="relative mb-5">
                                <div class="gradient-border rounded-full p-1">
                                    <img src="https://placehold.co/128x128/1e293b/e2e8f0?text=SDS" alt="Sourab Dey Soptom" class="w-28 h-28 md:w-32 md:h-32 rounded-full object-cover border-4 border-slate-800">
                                </div>
                            </div>
                            <h1 class="text-2xl md:text-3xl font-bold text-white">Sourab Dey Soptom</h1>
                            <p class="mt-2 text-md text-cyan-400 font-medium">Quantitative Researcher & Financial Technologist</p>
                            <div class="mt-4 flex items-center text-sm text-slate-400">
                                 <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
                                Bangladesh
                            </div>
                            <div class="mt-6 flex space-x-5" id="advancedSocialLinksContainer"></div>
                        </div>
                    </aside>
                    <div class="md:col-span-8 lg:col-span-8 p-6 md:p-8">
                        <div>
                            <h2 class="text-2xl font-bold text-white flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3 text-cyan-400"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                About Me
                            </h2>
                            <p class="mt-4 text-slate-300 leading-relaxed">I am a detail-oriented and forward-thinking student at Rabindra University, Bangladesh, pursuing a Bachelor of Business Administration with a major in Management Information Systems (MIS). My academic foundation in management is uniquely complemented by a profound passion for the quantitative and technological drivers of modern finance.</p>
                            <p class="mt-3 text-slate-300 leading-relaxed">My core interest lies in the FinTech space, where I am dedicated to exploring the synergy between data-driven strategies, algorithmic precision, and investment theory. I am actively developing my skills in programming and quantitative analysis to build models that can decode market complexities and inform strategic decision-making.</p>
                        </div>
                        <div class="mt-8">
                            <h2 class="text-2xl font-bold text-white flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3 text-cyan-400"><path d="m12 14 4-4"/><path d="m16 10-4 4"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/><path d="m6.34 6.34 1.41-1.41"/><path d="m19.07 19.07 1.41-1.41"/><path d="m12 2 4 4"/><path d="m12 22 4-4"/><circle cx="12" cy="12" r="10"/></svg>
                                Core Competencies & Interests
                            </h2>
                            <div class="mt-5 grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="card-glow bg-slate-800/70 p-5 rounded-xl border border-slate-700"><h3 class="font-semibold text-lg text-white">Financial Technology (FinTech)</h3><p class="mt-2 text-sm text-slate-400">Algorithmic trading, quantitative analysis, market data modeling, and blockchain applications.</p></div>
                                <div class="card-glow bg-slate-800/70 p-5 rounded-xl border border-slate-700"><h3 class="font-semibold text-lg text-white">MIS Research</h3><p class="mt-2 text-sm text-slate-400">Data-driven strategy, systems analysis, and leveraging IT for organizational efficiency.</p></div>
                                <div class="card-glow bg-slate-800/70 p-5 rounded-xl border border-slate-700"><h3 class="font-semibold text-lg text-white">Programming & Data Analysis</h3><p class="mt-2 text-sm text-slate-400">Mastering Python and R for statistical modeling, data visualization, and algorithm development.</p></div>
                                <div class="card-glow bg-slate-800/70 p-5 rounded-xl border border-slate-700"><h3 class="font-semibold text-lg text-white">Finoptiv Initiative</h3><p class="mt-2 text-sm text-slate-400">A personal project for curating and sharing knowledge at the crossroads of finance and tech.</p></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container footer-content">
            <div class="footer-socials" id="footerSocialsContainer"></div>
            <p class="copyright">&copy; <span id="currentYear"></span> Finoptiv by Sourab Dey Soptom. All Rights Reserved.</p>
        </div>
    </footer>
</div>

    <!-- MODALS & NOTIFICATIONS -->
    <div id="notification" class="notification"></div>
    <div id="passwordModal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="passwordModalTitle">Authentication Required</h3>
            <p id="passwordModalText">Please enter the password to proceed.</p>
            <input type="password" id="passwordInput" class="modal-input">
            <div class="modal-actions">
                <button id="passwordConfirmBtn" class="modal-btn modal-btn-confirm">Confirm</button>
                <button id="passwordCancelBtn" class="modal-btn modal-btn-cancel">Cancel</button>
            </div>
        </div>
    </div>
    <div id="confirmModal" class="modal-overlay">
        <div class="modal-content">
            <h3>Confirm Action</h3>
            <p id="confirmModalText">Are you sure you want to remove this article? This action cannot be undone.</p>
            <div class="modal-actions">
                <button id="confirmBtn" class="modal-btn modal-btn-danger">Delete</button>
                <button id="cancelBtn" class="modal-btn modal-btn-cancel">Cancel</button>
            </div>
        </div>
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- INITIALIZE LIBRARIES ---
        AOS.init({ duration: 800, once: true, offset: 100 });
        const markdownConverter = new showdown.Converter({ simplifiedAutoLink: true, strikethrough: true, tables: true });

        // --- CONFIGURATION & STATE (DATABASE FIX v14.0) ---
        // Using the exact credentials provided by the user.
        const JSONBIN_API_KEY = '$2a$10$ngBMfM29H692e0.OIPke7.LgwJDLeGQJCqmctQgTtiVSHLYlMXOpO';
        const JSONBIN_BIN_ID = '687500686063391d31ad754f';
        const JSONBIN_URL = `https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`;
        const CORRECT_PASSWORD = '23030127';
        
        const state = {
            currentPage: 'home',
            articles: [],
            socialLinks: [
                { name: 'LinkedIn', url: 'https://www.linkedin.com/in/sourav-dey-6147a72a4?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app', svgIcon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>` },
                { name: 'GitHub', url: 'https://github.com/Sdsourab', svgIcon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>` },
                { name: 'Facebook', url: 'https://www.facebook.com/share/16vVebvq8A/', svgIcon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>` },
                { name: 'Email', url: 'mailto:Soptom.7@gmail.com', svgIcon: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>` }
            ],
            editingArticleId: null,
            activeCategory: 'All',
            sortOrder: 'newest',
            visibleArticleCount: 8,
            articlesPerLoad: 8,
        };

        // --- DOM ELEMENT SELECTION ---
        const dom = {
            articlesGrid: document.getElementById('articlesGrid'),
            articleForm: document.getElementById('articleForm'),
            searchInput: document.getElementById('searchInput'),
            pages: document.querySelectorAll('.page'),
            navLinksAll: document.querySelectorAll('.nav-link, .logo'),
            passwordModal: document.getElementById('passwordModal'),
            confirmModal: document.getElementById('confirmModal'),
            mobileMenuBtn: document.getElementById('mobileMenuBtn'),
            navLinks: document.getElementById('navLinks'),
            mobileMenuOverlay: document.getElementById('mobileMenuOverlay'),
            siteHeader: document.getElementById('siteHeader'),
            categoryFilters: document.getElementById('categoryFilters'),
            sortSelect: document.getElementById('sortSelect'),
            viewToggle: document.getElementById('viewToggle'),
            loadMoreBtn: document.getElementById('loadMoreBtn'),
            loadMoreContainer: document.getElementById('loadMoreContainer'),
            formTitle: document.getElementById('formTitle'),
            submitBtn: document.getElementById('submitBtn'),
            markdownToolbar: document.getElementById('markdownToolbar'),
            advancedSocialLinksContainer: document.getElementById('advancedSocialLinksContainer'),
            footerSocialsContainer: document.getElementById('footerSocialsContainer'),
            currentYear: document.getElementById('currentYear'),
            notification: document.getElementById('notification'),
        };

        // --- DATA HANDLING (JSONBIN.IO - CORRECTED v14.0) ---
        const getArticlesFromCloud = async () => {
            try {
                // CORRECTED: Added 'X-Master-Key' header for authentication.
                const res = await fetch(`${JSONBIN_URL}/latest`, { 
                    headers: { 'X-Master-Key': JSONBIN_API_KEY } 
                });
                if (!res.ok) {
                    if (res.status === 404) {
                        console.log("Bin is empty or not found. Initializing with an empty array.");
                        return [];
                    }
                    throw new Error(`Network response error: ${res.statusText}`);
                }
                const data = await res.json();
                return Array.isArray(data.record) ? data.record : [];
            } catch (error) {
                console.error("Error fetching articles:", error);
                showNotification("Could not fetch articles from the cloud.", "error");
                return [];
            }
        };

        const saveArticlesToCloud = async (articles) => {
            try {
                // CORRECTED: Added 'X-Master-Key' header for authentication.
                const res = await fetch(JSONBIN_URL, {
                    method: 'PUT',
                    headers: { 
                        'Content-Type': 'application/json', 
                        'X-Master-Key': JSONBIN_API_KEY,
                        'X-Bin-Versioning': 'false' // To prevent creating new versions on each save
                    },
                    body: JSON.stringify(articles)
                });
                if (!res.ok) {
                    const errorBody = await res.text();
                    console.error("Error details from server:", errorBody);
                    throw new Error(`Network response error: ${res.statusText}`);
                }
                return true;
            } catch (error) {
                console.error("Error saving articles:", error);
                showNotification("Could not save articles to the cloud.", "error");
                return false;
            }
        };

        // --- UI RENDERING ---
        const renderArticles = () => {
            const searchTerm = dom.searchInput.value.toLowerCase();
            let currentArticles = searchTerm
                ? state.articles.filter(a => a.title.toLowerCase().includes(searchTerm) || a.category.toLowerCase().includes(searchTerm) || a.author.toLowerCase().includes(searchTerm))
                : [...state.articles];

            if (state.activeCategory !== 'All') {
                currentArticles = currentArticles.filter(a => a.category === state.activeCategory);
            }

            currentArticles.sort((a, b) => {
                switch (state.sortOrder) {
                    case 'oldest': return new Date(a.dateAdded) - new Date(b.dateAdded);
                    case 'author_az': return a.author.localeCompare(b.author);
                    default: return new Date(b.dateAdded) - new Date(a.dateAdded);
                }
            });

            const articlesToDisplay = currentArticles.slice(0, state.visibleArticleCount);
            dom.articlesGrid.innerHTML = ''; 

            if (articlesToDisplay.length === 0) {
                dom.articlesGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; opacity: 0.7; padding: 2rem 0;">No articles found matching your criteria.</p>';
            } else {
                articlesToDisplay.forEach(article => {
                    const card = document.createElement('article');
                    card.className = 'article-card';
                    card.setAttribute('data-aos', 'fade-up');
                    const placeholderImg = `https://placehold.co/600x400/161b22/c9d1d9?text=${encodeURIComponent(article.category)}`;
                    const excerptHtml = markdownConverter.makeHtml(article.excerpt);
                    
                    card.innerHTML = `
                        <div class="article-actions">
                            <button class="action-btn edit-btn" data-id="${article.id}" aria-label="Edit article"><i class="fa-solid fa-pen"></i></button>
                            <button class="action-btn remove-btn" data-id="${article.id}" aria-label="Remove article"><i class="fa-solid fa-trash"></i></button>
                        </div>
                        <a href="${article.link}" target="_blank" rel="noopener noreferrer" class="article-cover-link">
                            <img src="${article.cover || placeholderImg}" alt="${article.title}" class="article-cover-image" onerror="this.src='${placeholderImg}';">
                        </a>
                        <div class="article-content">
                            <a href="${article.link}" target="_blank" rel="noopener noreferrer" style="text-decoration:none; color:inherit; display: flex; flex-direction: column; flex-grow: 1;">
                                <span class="article-category" data-category="${article.category}">${article.category}</span>
                                <h3 class="article-title">${article.title}</h3>
                                <div class="article-excerpt">${excerptHtml}</div>
                            </a>
                            <div class="article-meta">
                                <span class="article-author"><i class="fa-solid fa-user-edit"></i> ${article.author}</span>
                                <a href="${article.link}" target="_blank" rel="noopener noreferrer" class="read-more-link">Read More <i class="fa-solid fa-arrow-right-long"></i></a>
                            </div>
                        </div>`;
                    dom.articlesGrid.appendChild(card);
                });
            }
            
            dom.loadMoreContainer.style.display = state.visibleArticleCount < currentArticles.length ? 'block' : 'none';
            setTimeout(() => AOS.refresh(), 100);
        };

        const renderCategoryFilters = () => {
            const categories = ['All', ...new Set(state.articles.map(a => a.category).filter(Boolean))];
            dom.categoryFilters.innerHTML = categories.map(cat => 
                `<button class="${state.activeCategory === cat ? 'active' : ''}" data-category="${cat}">${cat}</button>`
            ).join('');
        };

        const renderSocials = () => {
            const socialHtml = state.socialLinks.map(link => `
                <a href="${link.url}" target="_blank" rel="noopener noreferrer" title="${link.name}" class="text-slate-400 hover:text-cyan-400 transition-colors duration-200 icon-link">
                    ${link.svgIcon}
                </a>`).join('');
            
            if(dom.advancedSocialLinksContainer) dom.advancedSocialLinksContainer.innerHTML = socialHtml;
            if(dom.footerSocialsContainer) dom.footerSocialsContainer.innerHTML = socialHtml; 
        };

        // --- NAVIGATION & UI BEHAVIORS ---
        const navigateTo = (pageId) => {
            if (!document.getElementById(pageId)) pageId = 'home';
            state.currentPage = pageId;
            
            const url = new URL(window.location);
            url.hash = pageId;
            url.search = '';
            history.pushState({}, '', url);

            dom.pages.forEach(p => p.classList.toggle('active', p.id === pageId));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.toggle('active', l.dataset.page === pageId));
            closeMobileMenu();
            window.scrollTo(0, 0);
        };

        const closeMobileMenu = () => {
            dom.navLinks.classList.remove('active');
            dom.mobileMenuOverlay.classList.remove('active');
            dom.mobileMenuBtn.innerHTML = '<i class="fa-solid fa-bars"></i>';
        };

        let lastScrollY = window.scrollY;
        window.addEventListener('scroll', () => {
            if (window.innerWidth < 768) {
                dom.siteHeader.classList.toggle('header-hidden', lastScrollY < window.scrollY && window.scrollY > 70);
                lastScrollY = window.scrollY;
            }
        });

        // --- MODALS & NOTIFICATIONS ---
        const showNotification = (message, type = 'success') => {
            dom.notification.textContent = message;
            dom.notification.className = `notification ${type} show`;
            setTimeout(() => dom.notification.classList.remove('show'), 4000);
        };

        const showModal = (modalElement) => {
            modalElement.classList.add('show');
            const input = modalElement.querySelector('input');
            if (input) { input.value = ''; input.focus(); }
        };

        const hideModal = (modalElement) => modalElement.classList.remove('show');

        const promptForPassword = (title, text) => new Promise(resolve => {
            document.getElementById('passwordModalTitle').textContent = title || 'Authentication Required';
            document.getElementById('passwordModalText').textContent = text || 'Please enter the password to proceed.';
            showModal(dom.passwordModal);
            const confirmBtn = document.getElementById('passwordConfirmBtn');
            const cancelBtn = document.getElementById('passwordCancelBtn');
            const passwordInput = document.getElementById('passwordInput');
            const onConfirm = () => { cleanup(); resolve(passwordInput.value); };
            const onCancel = () => { cleanup(); resolve(null); };
            const onKeydown = (e) => { if (e.key === 'Enter') onConfirm(); };
            const cleanup = () => { hideModal(dom.passwordModal); confirmBtn.removeEventListener('click', onConfirm); cancelBtn.removeEventListener('click', onCancel); passwordInput.removeEventListener('keydown', onKeydown); };
            confirmBtn.addEventListener('click', onConfirm);
            cancelBtn.addEventListener('click', onCancel);
            passwordInput.addEventListener('keydown', onKeydown);
        });

        const showConfirmationModal = (text) => new Promise(resolve => {
            document.getElementById('confirmModalText').textContent = text;
            showModal(dom.confirmModal);
            const confirmBtn = document.getElementById('confirmBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            const onConfirm = () => { cleanup(); resolve(true); };
            const onCancel = () => { cleanup(); resolve(false); };
            const cleanup = () => { hideModal(dom.confirmModal); confirmBtn.removeEventListener('click', onConfirm); cancelBtn.removeEventListener('click', onCancel); };
            confirmBtn.addEventListener('click', onConfirm);
            cancelBtn.addEventListener('click', onCancel);
        });

        // --- EVENT LISTENERS ---
        dom.navLinksAll.forEach(link => link.addEventListener('click', (e) => { e.preventDefault(); navigateTo(link.dataset.page); }));
        dom.mobileMenuBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            const isActive = dom.navLinks.classList.toggle('active');
            dom.mobileMenuOverlay.classList.toggle('active', isActive);
            dom.mobileMenuBtn.innerHTML = isActive ? '<i class="fa-solid fa-times"></i>' : '<i class="fa-solid fa-bars"></i>';
        });
        dom.mobileMenuOverlay.addEventListener('click', closeMobileMenu);
        dom.searchInput.addEventListener('input', () => { state.visibleArticleCount = state.articlesPerLoad; renderArticles(); });
        dom.categoryFilters.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                state.activeCategory = e.target.dataset.category;
                state.visibleArticleCount = state.articlesPerLoad;
                renderCategoryFilters();
                renderArticles();
            }
        });
        dom.sortSelect.addEventListener('change', (e) => { state.sortOrder = e.target.value; renderArticles(); });
        dom.viewToggle.addEventListener('click', (e) => {
            const btn = e.target.closest('button');
            if (btn) {
                dom.articlesGrid.classList.toggle('list-view', btn.dataset.view === 'list');
                dom.viewToggle.querySelector('.active').classList.remove('active');
                btn.classList.add('active');
            }
        });
        dom.loadMoreBtn.addEventListener('click', () => { state.visibleArticleCount += state.articlesPerLoad; renderArticles(); });

        // --- CRUD & FORM LOGIC ---
        const resetAndNavigateHome = () => {
            dom.articleForm.reset();
            document.getElementById('articleId').value = '';
            state.editingArticleId = null;
            dom.formTitle.textContent = 'Add New Resource';
            dom.submitBtn.textContent = 'Publish Article';
            navigateTo('home');
        };

        dom.articleForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const isUpdating = !!state.editingArticleId;
            const enteredPassword = await promptForPassword(
                isUpdating ? 'Confirm Update' : 'Confirm Publish',
                'Please enter the password to proceed.'
            );
            if (enteredPassword !== CORRECT_PASSWORD) {
                if (enteredPassword !== null) showNotification('Incorrect password. Action denied.', 'error');
                return;
            }
            
            const articleData = {
                id: isUpdating ? state.editingArticleId : Date.now(),
                title: document.getElementById('articleTitle').value.trim(),
                author: document.getElementById('articleAuthor').value.trim(),
                link: document.getElementById('articleLink').value.trim(),
                category: document.getElementById('articleCategory').value.trim(),
                excerpt: document.getElementById('articleExcerpt').value.trim(),
                dateAdded: isUpdating ? state.articles.find(a => a.id === state.editingArticleId).dateAdded : new Date().toISOString()
            };

            const processSubmit = async (data) => {
                const updatedArticles = isUpdating
                    ? state.articles.map(a => a.id === state.editingArticleId ? { ...a, ...data } : a)
                    : [...state.articles, data];
                
                const success = await saveArticlesToCloud(updatedArticles);
                if (success) {
                    state.articles = updatedArticles;
                    renderCategoryFilters();
                    renderArticles();
                    showNotification(`Article ${isUpdating ? 'updated' : 'published'} successfully!`, 'success');
                    resetAndNavigateHome();
                }
            };
            
            const coverFile = document.getElementById('articleCover').files[0];
            if (coverFile) {
                const reader = new FileReader();
                reader.onload = (event) => { articleData.cover = event.target.result; processSubmit(articleData); };
                reader.onerror = () => showNotification("Error reading image file.", "error");
                reader.readAsDataURL(coverFile);
            } else {
                if (isUpdating) {
                    const existingArticle = state.articles.find(a => a.id === state.editingArticleId);
                    articleData.cover = existingArticle ? existingArticle.cover : '';
                } else {
                    articleData.cover = '';
                }
                processSubmit(articleData);
            }
        });

        dom.articlesGrid.addEventListener('click', async (e) => {
            const editButton = e.target.closest('.edit-btn');
            if (editButton) {
                const articleId = parseInt(editButton.dataset.id, 10);
                const articleToEdit = state.articles.find(a => a.id === articleId);
                if (articleToEdit) {
                    state.editingArticleId = articleId;
                    document.getElementById('articleId').value = articleToEdit.id;
                    document.getElementById('articleTitle').value = articleToEdit.title;
                    document.getElementById('articleAuthor').value = articleToEdit.author;
                    document.getElementById('articleLink').value = articleToEdit.link;
                    document.getElementById('articleCategory').value = articleToEdit.category;
                    document.getElementById('articleExcerpt').value = articleToEdit.excerpt;
                    dom.formTitle.textContent = 'Update Article';
                    dom.submitBtn.textContent = 'Update Article';
                    navigateTo('add-article');
                }
            }

            const removeButton = e.target.closest('.remove-btn');
            if (removeButton) {
                const enteredPassword = await promptForPassword('Confirm Deletion', 'This is a destructive action. Please enter the password to continue.');
                if (enteredPassword === null) return; 
                if (enteredPassword !== CORRECT_PASSWORD) {
                    showNotification('Incorrect password. Deletion denied.', 'error');
                    return;
                }
                const confirmed = await showConfirmationModal('Password correct. Are you sure you want to permanently delete this article? This cannot be undone.');
                if (confirmed) {
                    const articleId = parseInt(removeButton.dataset.id, 10);
                    const updatedArticles = state.articles.filter(article => article.id !== articleId);
                    const success = await saveArticlesToCloud(updatedArticles);
                    if (success) {
                        state.articles = updatedArticles;
                        renderCategoryFilters();
                        renderArticles();
                        showNotification('Article removed successfully.', 'success');
                    }
                }
            }
        });

        dom.markdownToolbar.addEventListener('click', (e) => {
            const button = e.target.closest('button, .color-swatch');
            if (!button) return;
            const textarea = document.getElementById('articleExcerpt');
            const { format, color } = button.dataset;
            const { selectionStart: start, selectionEnd: end, value } = textarea;
            const selectedText = value.substring(start, end);
            let prefix = '', suffix = '', replacement = selectedText || '';

            if (color) {
                prefix = `<mark style="background-color:${color};">`;
                suffix = `</mark>`;
                if (!selectedText) replacement = 'highlighted text';
            } else {
                switch (format) {
                    case 'bold': prefix = '**'; suffix = '**'; if (!selectedText) replacement = 'bold text'; break;
                    case 'italic': prefix = '*'; suffix = '*'; if (!selectedText) replacement = 'italic text'; break;
                    case 'h2': prefix = '## '; if (!selectedText) replacement = 'Heading'; break;
                    case 'h3': prefix = '### '; if (!selectedText) replacement = 'Subheading'; break;
                    case 'ul': prefix = '\n- '; if (!selectedText) replacement = 'List item'; break;
                    case 'ol': prefix = '\n1. '; if (!selectedText) replacement = 'List item'; break;
                }
            }
            
            textarea.setRangeText(`${prefix}${replacement}${suffix}`, start, end, 'select');
            textarea.focus();
        });

        // --- APP INITIALIZATION ---
        const initializeApp = async () => {
            dom.currentYear.textContent = new Date().getFullYear();
            renderSocials();
            state.articles = await getArticlesFromCloud();
            renderCategoryFilters();
            
            const handleUrlState = () => {
                const urlParams = new URLSearchParams(window.location.search);
                const searchParam = urlParams.get('search');
                const pageId = window.location.hash.substring(1) || 'home';
                
                navigateTo(pageId);
                
                if (searchParam) {
                    dom.searchInput.value = searchParam;
                    dom.searchInput.dispatchEvent(new Event('input', { bubbles: true }));
                }
            };

            handleUrlState();
            renderArticles(); 
            window.addEventListener('popstate', handleUrlState);
        };

        initializeApp();
    });
    </script>
</body>
</html>
